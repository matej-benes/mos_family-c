{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user within the MikyOS Family Connect application.",
      "properties": {
        "username": {
          "type": "string",
          "description": "The user's username for logging in."
        },
        "pin": {
          "type": "string",
          "description": "The user's PIN for logging in. Consider hashing this value for security."
        },
        "role": {
          "type": "string",
          "description": "The role of the user (e.g., 'superadmin', 'starší', 'mladší')."
        },
        "deviceId": {
          "type": "string",
          "description": "The ID of the device the user is associated with. (Relationship: User 1:1 Device)"
        },
        "name": {
            "type": "string",
            "description": "The display name of the user."
        },
        "avatarUrl": {
            "type": "string",
            "description": "URL for the user's avatar image."
        },
        "dataAiHint": {
            "type": "string",
            "description": "Hint for AI image generation for the avatar."
        },
        "bedtime": {
            "type": "string",
            "description": "Bedtime for the user in HH:mm format."
        }
      },
      "required": [
        "username",
        "pin",
        "role",
        "name"
      ]
    },
    "Device": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Device",
      "type": "object",
      "description": "Represents a device within the MikyOS Family Connect application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Device entity."
        },
        "role": {
          "type": "string",
          "description": "The role associated with the device ('mladší' or 'starší')."
        },
        "bedtime": {
          "type": "string",
          "description": "Timestamp indicating the bedtime for the device.",
          "format": "date-time"
        },
        "approvals": {
          "type": "string",
          "description": "Json string of approved apps and contacts. Stored as a JSON string. {apps:[], contacts:[]}}"
        }
      },
      "required": [
        "id",
        "role",
        "bedtime",
        "approvals"
      ]
    },
    "GameState": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "GameState",
      "type": "object",
      "description": "Represents the current game state of the application.",
      "properties": {
        "mode": {
          "type": "string",
          "description": "The current game mode ('hraje_se' or 'nehraje_se')."
        }
      },
      "required": [
        "mode"
      ]
    }
  },
  "auth": {
    "providers": [
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user information, including username, PIN (consider hashing!), role, and associated deviceId.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            }
          ]
        }
      },
      {
        "path": "/devices/{deviceId}",
        "definition": {
          "entityName": "Device",
          "schema": {
            "$ref": "#/backend/entities/Device"
          },
          "description": "Stores device information, including role, bedtime, and approved apps/contacts.",
          "params": [
            {
              "name": "deviceId",
              "description": "The unique identifier for the device."
            }
          ]
        }
      },
      {
        "path": "/gameState/global",
        "definition": {
          "entityName": "GameState",
          "schema": {
            "$ref": "#/backend/entities/GameState"
          },
          "description": "Stores the global game state, including the current mode."
        }
      }
    ]
  }
}
